{% extends "base.html" %}

{% block content %}
<section class="page-section">
  <div class="page-card-lg page-card-transaction">

    <!-- Car mini header -->
    <div class="car-mini-header mb-3">
      {% if car.image_url %}
      <img src="{{ car.image_url }}" alt="{{ car.make }} {{ car.model }}">
      {% endif %}
      <div>
        <div class="car-mini-title">
          {{ car.make }} {{ car.model }} ({{ car.year }})
        </div>
        <div class="car-mini-meta">
          Price: ${{ car.price }} • Mileage: {{ car.mileage|default:"N/A" }}
        </div>
      </div>
    </div>

    <div class="page-card-header">
      <h2 class="page-card-title mb-1">Buy this car</h2>
      <p class="page-card-subtitle">
        Fill in your contact information and we’ll get in touch to confirm the purchase details and finalize the sale.
      </p>
    </div>

    <form method="post" novalidate>
      {% csrf_token %}
      {% for field in form %}
      <div class="mb-3">
        <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
        {{ field }}
        {% if field.errors %}
        <div class="text-danger small">
          {{ field.errors|striptags }}
        </div>
        {% endif %}
      </div>
      {% endfor %}

      <div class="d-flex justify-content-between align-items-center mt-3">
        <a href="{% url 'car_detail' car.pk %}" class="btn btn-outline-soft">
          Back to car details
        </a>
        <button type="submit" class="btn btn-primary-gradient">
          Submit purchase request
        </button>
      </div>
    </form>
  </div>
</section>
{% endblock %}